# This file determins the target list and compilers to use.
# Get the supported targets.
targets=`cat $prefix/targets`
targetlist=`echo $targets | sed -e "s/ /,/g"`

bin=$prefix/bin
bindir=$bin
# Get the build processor. For now it is also the host and target processor.
build=`uname -p`
host=$build
target=$build 
os=linux

if [ $# -ge 1 ] ; then
  # The first argument is the desired cross host.
  host=$1
  bindir=$bindir-$host-$os
  shift
fi

if [ `which ecc` ] ; then
  # ecc exists, and is in the PATH.
  ecc=ecc
fi

if [ -e $bin/ecc ]; then
  ecc=$bin/ecc
fi

if [ "x$ecc" != "x" ] ; then
  # An ecc exists, use it to compile.
  if [ -e $prefix/libecc/lib/$target/$os/libc.a ]; then
    # To build for $target with libecc:
    cc="$ecc -target $host-ellcc-$os"
    cxx="$ecc++ -target $host-ellcc-$os"
    hcc=$ecc
    hcxx=$ecc++
    ar=$ecc-ar
    builddir="-$host-$os"
    haslibs=1
  else
    # libecc has not been built, use the host's libraries.
    cc=$ecc
    cxx=$ecc++
    hcc=$ecc
    hcxx=$ecc++
    ar=$ecc-ar
    builddir=""
    haslibs=0
  fi
else
  # Build with the gcc compiler
  cc=gcc
  cxx=g++
  hcc=gcc
  hcxx=g++
  ar=ar
  builddir=""
  haslibs=0
fi

